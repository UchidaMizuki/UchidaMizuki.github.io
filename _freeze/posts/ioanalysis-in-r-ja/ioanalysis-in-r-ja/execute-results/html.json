{
  "hash": "311197aa2f337860178088ae0dc73a2c",
  "result": {
    "markdown": "---\ntitle: \"🗾Rで産業連関分析\"\nlang: ja\ndate: \"2022-05-31\"\ncategories: [ioanalysis, R, Japanese]\n---\n\n\n産業連関分析は，経済波及効果の算出に広く用いられている分析手法です．\n日本では，国や都道府県によって，約5年に1度，産業連関表と呼ばれる統計データが\n作成・公開されており，産業連関分析における基礎データとなっています．\n\nこれまで，産業連関分析では，Excel・VBAが用いられることが多かったようです．\n\n一方で，近年は，Python・R・Juliaなどのプログラミング言語の普及が進んでいます．\nこれらのプログラミング言語は以下のような特長を持っています．\n\n- 無料で利用することができる\n- 作業の再現性が高まりミスが修正しやすい・他者がミスに気づきやすい\n- 高度な分析手法が簡単に利用できる\n\nそのため今後は，産業連関分析においても，これらのプログラミング言語の利用が\n進むのではないかと思われます．\n\nここでは，Rを用いて産業連関分析を行います．\nRでは近年，tidyverseなどモダンなデータ分析を行うためのパッケージが\n多く提供されており，プログラミング初心者でも習得しやすい言語であると思います．\n\n産業連関表として，e-Statのデータベースで公開されている日本（国）の\n2013年・13部門産業連関表を用います．\nここで使用するデータは，\n[こちら](https://github.com/UchidaMizuki/blog-ioanalysis-in-r)\nからダウンロードできます．\n\n\n\n## 分析の流れ\n\n一般的な産業連関分析の流れは以下の通りです．\n\n1. 産業連関表の整形\n1. 投入係数行列の算出\n1. レオンチェフ逆行列の算出\n1. 経済波及効果の算出\n\n以上の流れに沿って，Rによる産業連関分析の計算例を示します．\n\n\n\n## Rによる産業連関分析\n### 産業連関表の整形\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# library(tidyverse)\n# \n# iotable <- read_csv(\"iotable_ja.csv\",\n#                     col_types = cols(.default = \"c\",\n#                                      value = \"n\"))\n# \n# knitr::kable(head(iotable))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# iotable <- read_csv(\"iotable_wider_ja.csv\",\n#                     col_types = cols(.default = \"c\")) |> \n#   separate(input, c(\"input_type\", \"input_name\"),\n#            sep = \"/\") |>\n#   pivot_longer(!c(input_type, input_name),\n#                names_to = c(\"output_type\", \"output_name\"),\n#                names_sep = \"/\",\n#                values_to = \"value\",\n#                values_transform = list(value = parse_number)) |> \n#   drop_na(value)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# library(dibble)\n# \n# iotable <- iotable |> \n#   dibble_by(input = c(input_type, input_name),\n#             output = c(output_type, output_name),\n#             .names_sep = \"_\")\n# print(iotable,\n#       n = 5)\n```\n:::\n\n\n### 投入係数行列の算出\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# total_input <- iotable |>\n#   filter(output$type == \"industry\") |> \n#   apply(\"output\", sum)\n# \n# interindustry <- iotable |> \n#   filter(input$type == \"industry\",\n#          output$type == \"industry\")\n# \n# inputcoeff <- broadcast(interindustry / total_input,\n#                         c(\"input\", \"output\"))\n# print(inputcoeff,\n#       n = 5)\n```\n:::\n\n\n### レオンチェフ逆行列の算出\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# localoutput <- iotable |> \n#   filter(input$type == \"industry\",\n#          !output$type %in% c(\"export\", \"import\")) |> \n#   apply(\"input\", sum)\n# \n# import <- iotable |> \n#   filter(input$type == \"industry\",\n#          output$type == \"import\") |> \n#   apply(\"input\", sum) \n# import <- -import\n# \n# importcoeff <- import / localoutput\n# \n# I <- eye(inputcoeff)\n# M <- importcoeff\n# A <- inputcoeff\n# \n# leontiefinv <- broadcast(I - (1 - M) * A,\n#                          c(\"input\", \"output\")) |> \n#   solve()\n# print(leontiefinv,\n#       n = 5)\n```\n:::\n\n\n### 経済波及効果の算出\n\nTODO\n\n## まとめ\n\nTODO",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}